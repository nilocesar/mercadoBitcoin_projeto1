{"version":3,"sources":["eventEmitter.js"],"names":["indexOf","Array","prototype","haystack","needle","i","length","idx","found","EventEmitter","events","on","event","listener","push","removeListener","splice","emit","listeners","args","slice","call","arguments","apply","once","g"],"mappings":"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","sourcesContent":["/* Polyfill indexOf. */\nvar indexOf;\n\nif (typeof Array.prototype.indexOf === 'function') {\n    indexOf = function (haystack, needle) {\n        return haystack.indexOf(needle);\n    };\n} else {\n    indexOf = function (haystack, needle) {\n        var i = 0, length = haystack.length, idx = -1, found = false;\n\n        while (i < length && !found) {\n            if (haystack[i] === needle) {\n                idx = i;\n                found = true;\n            }\n\n            i++;\n        }\n\n        return idx;\n    };\n};\n\n\n/* Polyfill EventEmitter. */\nvar EventEmitter = function () {\n    this.events = {};\n};\n\nEventEmitter.prototype.on = function (event, listener) {\n    if (typeof this.events[event] !== 'object') {\n        this.events[event] = [];\n    }\n\n    this.events[event].push(listener);\n};\n\nEventEmitter.prototype.removeListener = function (event, listener) {\n    var idx;\n\n    if (typeof this.events[event] === 'object') {\n        idx = indexOf(this.events[event], listener);\n\n        if (idx > -1) {\n            this.events[event].splice(idx, 1);\n        }\n    }\n};\n\nEventEmitter.prototype.emit = function (event) {\n    var i, listeners, length, args = [].slice.call(arguments, 1);\n\n    if (typeof this.events[event] === 'object') {\n        listeners = this.events[event].slice();\n        length = listeners.length;\n\n        for (i = 0; i < length; i++) {\n            listeners[i].apply(this, args);\n        }\n    }\n};\n\nEventEmitter.prototype.once = function (event, listener) {\n    this.on(event, function g () {\n        this.removeListener(event, g);\n        listener.apply(this, arguments);\n    });\n};\n"],"file":"eventEmitter.js"}